<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href=https://usysrc.github.io/usysrc.dev/css/style.css><title>usysrc.dev | Tables in Pico8</title></head><body><a href=/usysrc.dev/><div class=logo><img src=https://usysrc.github.io/usysrc.dev/img/logo.svg></div></a><div id=nav-border class=container><nav id=nav class="nav justify-content-center"><p><a href=https://usysrc.github.io/usysrc.dev/pages/code/>code</a>
<a href=https://usysrc.github.io/usysrc.dev/pages/games/>interaction</a>
<a href=https://usysrc.github.io/usysrc.dev/pages/music/>sound</a></p></nav></div><div id=content><h1 id=tables-in-pico8>Tables in Pico8</h1><p><img src=/images/tables.png alt></p><h2 id=the-concatenation-trick>The Concatenation Trick</h2><p>For beginners, I suggest you use concatenation to index 2D arrays. Create a new object in a 2D cell at (i,j) in a table called myArray with the following code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span>myArray[i<span style=color:#ff79c6>..</span><span style=color:#f1fa8c>&#34;,&#34;</span><span style=color:#ff79c6>..</span>j] <span style=color:#ff79c6>=</span> {}
</span></span></code></pre></div><p>To iterate over all objects in the myArray you can use the pairs iterator. Caution: the objects are not ordered when using pairs!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#ff79c6>for</span> k,v <span style=color:#ff79c6>in</span> pairs(myArray) <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>	<span style=color:#6272a4>-- v is the cell object</span>
</span></span><span style=display:flex><span>	<span style=color:#6272a4>-- k is a string in the form of &#34;i,j&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>end</span>
</span></span></code></pre></div><p>If we want to access the objects in a particular order we should use nested for loops:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#ff79c6>for</span> i<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>8</span> <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>for</span> j<span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>, <span style=color:#bd93f9>8</span> <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>		<span style=color:#8be9fd;font-style:italic>local</span> cell <span style=color:#ff79c6>=</span> myArray[i<span style=color:#ff79c6>..</span><span style=color:#f1fa8c>&#34;,&#34;</span><span style=color:#ff79c6>..</span>j] 
</span></span><span style=display:flex><span>		<span style=color:#6272a4>-- do stuff with the cell</span>
</span></span><span style=display:flex><span>	<span style=color:#ff79c6>end</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>end</span>
</span></span></code></pre></div><h2 id=objects-and-container>Objects And Container</h2><p><img src=/images/invaders.gif alt></p><p>Entities like the spaceship in this gif are objects. Containers for objects are special in Pico-8 because we have a couple of built-in functions to help us manage insertion and deletion. I strongly suggest to use add(), del() and all() for container and entity management.</p><p>Create and add an object to a table with add():</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>local</span> entities <span style=color:#ff79c6>=</span> {}
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>local</span> player <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>	x <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span>,
</span></span><span style=display:flex><span>	y <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>3</span>,
</span></span><span style=display:flex><span>	sprite <span style=color:#ff79c6>=</span> <span style=color:#bd93f9>5</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>add(entities, player)
</span></span></code></pre></div><p>In your _update or _draw callbacks, you will most likely want to loop over all objects. You should use all() for that:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#ff79c6>for</span> entity <span style=color:#ff79c6>in</span> all(entities) <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>	<span style=color:#6272a4>-- do stuff here</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>end</span>
</span></span></code></pre></div><p>You can use del() to remove an object from the container even while iterating over the container:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lua data-lang=lua><span style=display:flex><span><span style=color:#ff79c6>for</span> entity <span style=color:#ff79c6>in</span> all(entities) <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>	del(entities, entity)
</span></span><span style=display:flex><span><span style=color:#ff79c6>end</span>
</span></span></code></pre></div><p>This only works with all() and del()! This is great for games where you have objects such as bullets, effects or timed events that are added and removed dynamically.</p><p>I hope that these two hints help you to get started with the awesome Pico-8 engine. For advanced users, other methods might be more efficient. I recommend reading the Pico-8 Docs or the PIL for more information.</p></div><footer><a href=https://mastodon.social/@headchant rel=me>fediverse</a>
<a href=https://github.com/usysrc/>github</a>
<a href=https://spelltop.itch.io>itch</a>
- 2024 usysrc</footer></body></html>